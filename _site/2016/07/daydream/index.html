<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design</title>
    <meta name="description" content="Design" />
    <meta name="keywords" content="iostreamer, design" />
    <meta name="author" content="iostreamer" />

    <script src="/design/js/anime.min.js"></script>

    <link rel="stylesheet" type="text/css" href="/design/css/demo.css" />
    <link rel="stylesheet" type="text/css" href="/design/css/component.css" />
    <link rel="stylesheet" type="text/css" href="/design/css/glitch_scroll.css" />
    <link rel="shortcut icon" href="/design/io.jpg">
  </head>
  <body>

  <style>

html, body {margin: 0; height: 100%; overflow: hidden}

body {
  background-color: #FFF;
}

.daydream .ball{
  margin: auto;
  height: 10rem;
  width: 10rem;
  border-radius: 30rem;
  background-color: #E91E63;
}

</style>

<section class="daydream">
  <div class="ball">

  </div>
</section>

<script>

  function chain(...anims) {
    anims = Array.prototype.concat.apply([],anims)
    anims.reduce(function (prev, curr) {
      if(prev.complete){
        var oldComplete = prev.complete
        prev.complete = function () {
          oldComplete()
          anime(curr)
        }
        return curr;
      }
      prev.complete = function () {
        anime(curr)
      }
      return curr;
    })
  }

  var ballDrop = {
    targets: '.ball',
    translateY: 220,
    elasticity: 1,
  }

  var ballTransform = {
    targets: '.ball',
    'border-radius': 0,
    width: 2,
    easing: 'linear',
    duration: 70,
  }

  var lineRotate90 = {
    targets: '.ball',
    delay: 300,
    translateY: 220,
    rotate : 90,
  }

  var lineRotateLast = {
    targets: '.ball',
    delay: 100,
    translateY: 220,
    rotate : 270 + 60,
  }

  function rotators(anim) {
    var anims = [anim]
    for(var i=0; i<2; i++){
      var newAnim = Object.assign({},anims[anims.length -1])
      newAnim.rotate = (anims[anims.length -1]).rotate + 90
      newAnim.delay = 0
      anims.push(newAnim)
    }
    return anims
  }

  lineRotateLast.complete = function () {
    anime({
      targets: '.ball',
      height: 3300,
      translateY : -1300,
      width: 1000,
      translateX : -950,
      rotate: 270+60,
      complete: function () {
      }
    })

    anime({
      targets: 'body'
    })

  }

  chain([ballDrop, ballTransform], rotators(lineRotate90), [lineRotateLast])

  setTimeout(function () {
    anime(ballDrop);

  },400);
</script>


  </body>
</html>
